#!/usr/bin/env bash

# Author: Jarrod Cameron (z5210220)

# NOTE: Using `entr' to wait for the files to update doesn't work.
#       I assume this is because the files are generated when
#       being read.

FOREGROUND=282828
BACKGROUND=458588

# Remaining battery level
level=$(cat /sys/class/power_supply/BAT0/capacity)

if [ "$(cat /sys/class/power_supply/BAT0/status)" = "Discharging" ]; then
  TEXT="Battery: $level""%"
else
  TEXT="Charging: $level%"
fi

echo "<span background='#${BACKGROUND}' foreground='#${FOREGROUND}'> $TEXT </span>"
echo "<span background='#${BACKGROUND}' foreground='#${FOREGROUND}'> $TEXT </span>"
